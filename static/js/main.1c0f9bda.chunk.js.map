{"version":3,"sources":["Contexts/Video.js","Sections/Home/Hero/index.js","Sections/Home/Bkgd/index.js","Sections/Home/index.js","Sections/Videos/Thumb.js","Sections/Videos/Legend.js","Sections/Videos/Next.js","Sections/Videos/index.js","Sections/Shows/Data.js","Sections/Shows/index.js","Layout/index.js","registerServiceWorker.js","index.js","Hoc/App.js","Hoc/Release.js","Hoc/index.js","Contexts/App.js","Utils/Paths.js","Utils/StoryTrigger.js","Utils/ImgTracker.js","Utils/ImgPrefetch.js","Utils/Machines.js","Utils/Fonts.js","Utils/index.js","Machines/HomeStates.js","Machines/SectionsStates.js","Machines/App.js","Machines/index.js","Machines/Release.js","Sections/Releases/Nav/index.js","Sections/Releases/index.js","Components/Image/index.js","Components/Spinner/index.js","Components/index.js","Sections/Home/Bkgd/home-bkgd.jpg","Layout/img_error.jpg","Constants.js"],"names":["VideoContext","React","createContext","playerState","playerReady","videoId","state","Provider","Consumer","BlockquoteStart","_ref","ready","from","react_default","a","createElement","web","native","immediate","clipPath","to","style","blockquote","className","BlockquoteEndContent","_ref2","config","delay","y","w","_ref3","react","span","transform","interpolate","concat","width","BlockquoteEnd","_ref4","children","t","_ref5","marginTop","Title","_ref6","h","o","_ref7","div","height","h1","opacity","_abstractDefaultProps","AbstractKf","Keyframes","Spring","idle","mounted","Abstract","_ref8","_ref9","p","hr","HomeNav","_ref10","items","section","_ref10$onRest","onRest","_ref11","ul","item","styles","li","Link","src","getNavImgSrc","alt","_homeProps","s","_releasesProps","_videosProps","_defaultProps","HomeSpring","entering","releases_in","releases_out","videos_in","videos_out","Home","navState","_this","props","createRef","handleOnRest","onNext","_this2","this","_this$state","_ref12","header","ref","tabIndex","Hero_BlockquoteStart","Hero_Title","Hero_BlockquoteEnd","Hero_BlockquoteEndContent","Hero_Abstract","Hero_HomeNav","RELEASES_ID","VIDEOS_ID","nextProps","prevState","PureComponent","withApp","context","value","home","hero","getInitialState","showPlayer","indexOf","HomeBkgd","_player","_hasNext","getNextEvents","handleOnEnd","e","target","playVideo","handleOnReady","mute","handleOnPlay","pauseVideo","onSend","prevProps","_shouldForceOnReady","snapshot","_togglePlayer","YouTube","HOME_BKGD_VIDEOID","opts","playerVars","autoplay","disablekb","controls","showinfo","modestbranding","loop","fs","autohide","rel","enablejsapi","onPlay","onReady","onEnd","classNames","home-video--mobile","home-video--paused","playerRenderer","_getInitialState","bkgd","Home_Hero","Home_Bkgd","Thumb","onClick","_useContext","useContext","isPayling","showSpinner","backgroundImage","getVideoUrl","pointerEvents","Legend","_VIDEOS$videoId","VIDEOS","title","description","NextLink","videoIndex","findIndex","v","index","length","next","b","VideoSpring","leaving","getId","current","previous","Object","objectSpread","Videos","_videoOpts","_setPlayerState","setState","handleOnClick","handleOnPause","isMounted","containerClassName","onPause","videos--mounted","videos--ready","Video","backgroundSize","Videos_Thumb","Videos_Legend","Next","playState","isActive","matches","id","videos","Data","reduce","c","city","country","date","bands","year","mounth","dates","push","code","cities","countries","forEach","band","ListSorted","l","keys","map","k","sort","Lists","Countries","Cities","Bands","Dates","Shows","layer--active","shows--active","key","show","i","day","slicedToArray","values","_code$split","split","_code$split2","Layout","hasError","_hasErrorBoundary","error","info","console","log","componentStack","ImgErr","href","process","errorBoundaryRenderer","Sections_Home","Releases","src_Sections_Videos","src_Sections_Shows","miniDebugRenderer","contextType","AppContext","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","MainRoute","Contexts_App","Layout_Layout","ReactDOM","render","BrowserRouter","basename","Route","path","component","document","getElementById","URL","origin","addEventListener","fetch","response","status","headers","get","unregister","reload","checkValidServiceWorker","registerServiceWorker","mapContextToProps","arguments","undefined","WrappedComponent","AppHoc","_PureComponent","_getPrototypeOf2","classCallCheck","_len","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","getStateByPath","_get","getValue","getStrings","toStrings","nextEvents","getContext","stateMatches","isReady","hasVideoHeader","getDevice","device","isDevice","isDesktop","isTablet","isMobile","isLandscape","orientation","bkgdCanPlay","_this$getContext$sect","getHelpers","hanleOnSend","evt","Machine","send","hanleOnNext","inherits","createClass","assign","displayName","getComponentName","hoistStatics","getReleaseStage","withRelease","release","_ref$assets","assets","ReleaseHoc","assetsLoaded","assetsLoading","_loadAssets","ImgsPrefetch","handleOnLoadAssets","handleOnMounted","handleOnNext","_this$props","story","onMounted","_context$context","_context$context$id","previousId","currentId","isPrevious","history","__webpack_require__","d","__webpack_exports__","Hoc_App","Release","defaultViewport","setCurrentMediaQueries","mq","_Users_michaellefebvre_www_m_sixteen_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_5__","MEDIA_QUERIES_BY_MATCH","media","getViewport","getInitialContext","merge","initialContext","getRouteSection","getRouteId","MEDIA_QUERIES_LIST","q","matchMedia","App","machine","initialState","pathname","_escActive","service","init","activities","waitingForStoryTrigger","ctx","_setWaitingForStoryTrigger","listenEscKey","_setListenEscKey","onTransition","handleOnTransition","_send","_setServiceContext","type","_sectionNavigate","_getRouteParams","getRouteParams","_getRouteParams$secti","_getRouteParams$id","_this$state$machine$c","currentSection","StoryTrigger","start","handleOnStoryTrigger","stop","handleOnMediaQuery","handleOnResize","changed","_id","handleOnKeydown","keyCode","passive","addListener","devTools","removeEventListener","react__WEBPACK_IMPORTED_MODULE_6___default","Component","withRouter","getStaticUrl","relativePath","inst","_bindEvents","_eventsBound","STORY_TRIGGER_EVENTS","_handleEvent","capture","_unbindEvents","_releaseId","_callback","throttle","STORY_TRIGGER_THROTTLE","msg","ImgTracker","elt","callback","Observer","observe","observedImages","set","delete","unobserve","Map","IntersectionObserver","entries","entry","intersectionRatio","rootMargin","threshold","_LOADED_IMGS","ImgPrefetch","inStatic","Promise","resolve","reject","has","image","Image","onerror","Error","onload","paths","all","contextMatch","actions","obj","str","_str$split","_str$split2","doesCondMatches","c1","c2","event","ObserveFontsLoading","observers","APP_FONTS_LIST","name","weight","font","FontFaceObserver","load","APP_FONTS_TIMEOUT","AnimatedDiv","Utils_getImageUrl","Utils_getPhotoUrl","Utils_getVideoUrl","roundToEven","Utils_getNavImgSrc","Utils_StoryTrigger","ImgTracker_ImgTracker","ImgPrefetch_ImgPrefetch","Machines_contextMatch","Fonts_ObserveFontsLoading","animated","Globals","defaultElement","defaultRouteProps","params","getImageUrl","getPhotoUrl","_document$body$getBou","body","getBoundingClientRect","n","Math","round","homeStates","states","initial","unknown","on","","cond","NEXT","HERO.NEXT","onEntry","SECTION.NAVIGATE","CONTEXT.UPDATED","getSectionStates","SECTION.NAVIGATE.ID","_merge","shows","releases","pending","after","defineProperty","RELEASE_IDLE_TIMEOUT","RELEASE.PENDING","RELEASE.STORY","appMachine","loadind","invoke","onDone","onError","fatal","SET.CONTEXT","setContext","_ref$context","setNextToCurrentSection","setCurrentToPreviousSection","clearSectionContext","setSectionId","services","loadAppAssets","_loadAppAssets","asyncToGenerator","regenerator_default","mark","_callee","images","fonts","loaded","wrap","_context","prev","ImgBkgd","sent","APP_IMAGES_ONLOAD","abrupt","_x","guards","canPlayHomeVideo","_ref2$section","canMountHomeVideo","_ref3$section","isLoaded","isLeaving","isCurrent","RELEASE.NEXT","_","unmounted","onExit","loading","animate","background","resetContext","fetchAssets","_fetchAssets","MachineInterpret","_service","_started","interpret","AppMachine","withContext","withConfig","NavState","nW","cbT","_NAV_LINK_HEIGHT","clT","_NAV_CLOSE_Y","mbO","_mounted","expend","_expend","_callee2","_context2","_x2","unexpend","_unexpend","_callee3","_context3","_x3","ReleasesNav","coversState","handleOnMouseEnter","isIdle","handleOnMouseLeave","onMouseLeave","onMouseEnter","NavLink","activeClassName","Album","lazy","bind","Split","Ep","ReleasesScrollInvite","release__scroll-invite--show","ReleasesLoading","Components","theme","scrollInvite","_classNames","_ref2$id","Releases_Nav","Releases_ReleasesScrollInvite","fallback","_imgRef","_getImgPath","extension","format","_getRest","_this$props2","objectWithoutProperties","handleOnVisible","r","defaultProps","Spinner","f","viewBox","xmlns","strokeWidth","fill","fillRule","stroke","cx","cy","strokeLinecap","Image_Image","src_Components_Spinner","module","exports","outer","outerStyle","scrollbarWidth","position","overflow","top","appendChild","offsetWidth","clientWidth","removeChild","album","ep","RELEASES_COVERS","nevers","rouge","VIDEOS_THUMBS"],"mappings":"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","file":"static/js/main.1c0f9bda.chunk.js","sourcesContent":["import React from 'react';\n\nexport const getInitialContext = () => ({\n  playerState: 'pauseVideo',\n  playerReady: false,\n  videoId: null,\n  state: 'idle'\n});\n\nconst VideoContext = React.createContext(getInitialContext());\n\nexport const { Provider, Consumer } = VideoContext;\n\nexport default VideoContext;\n","import React, { PureComponent, Fragment } from 'react';\nimport { Spring, Keyframes, Trail, animated } from 'react-spring';\nimport { Link } from 'react-router-dom';\nimport { getNavImgSrc } from 'Utils';\nimport { withApp } from 'Hoc';\nimport { VIDEOS_ID, RELEASES_ID } from 'Constants';\n\nimport './index.scss';\n\nconst BlockquoteStart = ({ ready }) => {\n  const from = 'polygon(0% 0%, 0% 0%, -10% 100%, 0% 100%)';\n  const to = 'polygon(0% 0%, 110% 0%, 100% 100%, 0% 100%)';\n  return (\n    <Spring\n      native\n      immediate={!ready}\n      from={{ clipPath: from }}\n      to={{ clipPath: ready ? to : from }}\n    >\n      {style => (\n        <animated.blockquote\n          className=\"home__quote home__quote--start\"\n          style={style}\n        >\n          There 's nothing left\n          <br className=\"home__quote__br\" /> but a corpse\n        </animated.blockquote>\n      )}\n    </Spring>\n  );\n};\n\nconst BlockquoteEndContent = ({ ready }) => (\n  <Spring\n    native\n    immediate={!ready}\n    config={{ delay: 200 }}\n    from={{ y: -30, w: 0 }}\n    to={{ y: ready ? 0 : -30, w: ready ? 100 : 0 }}\n  >\n    {({ y, w }) => (\n      <Fragment>\n        <span className=\"home__quote--end__text\">\n          <animated.span\n            style={{ transform: y.interpolate(y => `translateY(${y}px)`) }}\n          >\n            A crash of\n          </animated.span>\n        </span>\n        <br />\n        <span className=\"home__quote--end__text\">\n          <animated.span\n            style={{ transform: y.interpolate(y => `translateY(${y}px)`) }}\n          >\n            flesh and bones\n          </animated.span>\n        </span>\n        <animated.span\n          className=\"home__quote--end__hr\"\n          style={{ width: w.interpolate(w => `${w}%`) }}\n        />\n      </Fragment>\n    )}\n  </Spring>\n);\n\nconst BlockquoteEnd = ({ ready, children }) => (\n  <Spring\n    native\n    immediate={!ready}\n    config={{ delay: 600 }}\n    from={{ t: 70 }}\n    to={{ t: ready ? 86 : 70 }}\n  >\n    {({ t }) => (\n      <animated.blockquote\n        className=\"home__quote home__quote--end\"\n        style={{ marginTop: t.interpolate(t => `-${t}px`) }}\n      >\n        {children}\n      </animated.blockquote>\n    )}\n  </Spring>\n);\n\nconst Title = ({ ready }) => (\n  <Spring\n    native\n    immediate={!ready}\n    config={{ delay: 400 }}\n    from={{ h: 0, o: 0, t: 0 }}\n    to={{ h: ready ? 305 : 0, o: ready ? 1 : 0, t: ready ? 0 : 200 }}\n  >\n    {({ h, o, t }) => (\n      <animated.div\n        className=\"home__title\"\n        style={{ height: h.interpolate(h => `${h}px`) }}\n      >\n        <animated.h1\n          className=\"home__title__primary\"\n          style={{ opacity: o.interpolate(o => o) }}\n        >\n          m-sixteen\n        </animated.h1>\n        <h2 className=\"home__title__sub\">\n          <animated.span\n            style={{ transform: t.interpolate(t => `translateY(${t}%)`) }}\n          >\n            paris punk rock, 2000-2010\n          </animated.span>\n        </h2>\n      </animated.div>\n    )}\n  </Spring>\n);\n\nconst _abstractDefaultProps = { w: 0, t: -100 };\nconst AbstractKf = Keyframes.Spring({\n  idle: {\n    immediate: true,\n    from: _abstractDefaultProps,\n    to: _abstractDefaultProps\n  },\n  mounted: { delay: 800, w: 100, t: 0, from: _abstractDefaultProps }\n});\n\nconst Abstract = ({ state }) => (\n  <AbstractKf\n    native\n    state={state}\n    // config={{ mass: 5, tension: 2000, friction: 200 }}\n  >\n    {({ w, t }) => (\n      <div className=\"home__abstract\">\n        <div className=\"home__abstract__drawer\">\n          <animated.p\n            className=\"home__abstract__txt\"\n            style={{ transform: t.interpolate(t => `translateY(${t}%)`) }}\n          >\n            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent\n            condimentum bibendum rhoncus. Duis viverra tempus felis.\n          </animated.p>\n        </div>\n        <animated.hr\n          className=\"home__abstract__hr\"\n          style={{ width: w.interpolate(w => `${w}%`) }}\n        />\n      </div>\n    )}\n  </AbstractKf>\n);\n\nconst HomeNav = ({ ready, items, from, section, onRest = () => null }) => {\n  return (\n    <Spring\n      native\n      immediate={!ready}\n      config={{ delay: 1000 }}\n      from={{ t: from }}\n      to={{ t: ready ? 0 : from }}\n      onRest={onRest}\n    >\n      {({ t }) => (\n        <animated.ul\n          className={`home__nav home__nav--${section}`}\n          style={{ transform: t.interpolate(t => `translateX(${t}%)`) }}\n        >\n          <Trail\n            items={items}\n            config={{ delay: 1200 }}\n            from={{ opacity: 0 }}\n            to={{ opacity: ready ? 1 : 0 }}\n          >\n            {item => styles => {\n              // console.log(item)\n              return (\n                <animated.li className=\"home__nav__item\" style={styles}>\n                  <Link to={`/${section}/${item}`}>\n                    <img\n                      src={getNavImgSrc(section, item)}\n                      className=\"home__nav__thumb\"\n                      alt=\"\"\n                    />\n                  </Link>\n                </animated.li>\n              );\n            }}\n          </Trail>\n        </animated.ul>\n      )}\n    </Spring>\n  );\n};\n\nconst _homeProps = { s: 1, o: 1, t: 0 };\nconst _releasesProps = { s: 0.95, o: 0, t: 0 };\nconst _videosProps = { s: 1, o: 0, t: 5 };\nconst _defaultProps = { immediate: true, from: _homeProps, to: _homeProps };\n\nconst HomeSpring = Keyframes.Spring({\n  entering: _defaultProps,\n  releases_in: { from: _homeProps, to: _releasesProps },\n  releases_out: { to: _homeProps, from: _releasesProps },\n  videos_in: { from: _homeProps, to: _videosProps },\n  videos_out: { to: _homeProps, from: _videosProps }\n});\n\nclass Home extends PureComponent {\n  state = {\n    navState: 'idle',\n    state: this.props.state,\n    mounted: false\n  };\n\n  _ref = React.createRef();\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { state } = nextProps;\n\n    if (!prevState.mounted && state === 'mounted')\n      return {\n        navState: 'mounted',\n        mounted: true,\n        state\n      };\n\n    if (state !== prevState.state)\n      return {\n        state\n      };\n\n    return null;\n  }\n\n  //\n  // Life cycle\n  // --------------------------------------------------\n\n  // componentDidMount() {\n  //   console.log('HERO componentDidMount', this.state.state)\n  // }\n\n  // componentDidUpdate() {\n  //   console.log('HERO componentDidUpdate', this.state.state)\n  // }\n\n  //\n  // Helpers\n  // --------------------------------------------------\n\n  //\n  // Events Handlers\n  // --------------------------------------------------\n\n  handleOnRest = () => {\n    this.props.onNext();\n  };\n\n  //\n  // Renderers\n  // --------------------------------------------------\n\n  render() {\n    const { state, mounted: ready, navState } = this.state;\n\n    if (state === 'idle') return null;\n\n    return (\n      <Fragment>\n        <HomeSpring native state={state} onRest={this.handleOnRest}>\n          {({ s, o, t }) => (\n            <animated.header\n              className=\"home\"\n              ref={this._ref}\n              tabIndex=\"-1\"\n              style={{ transform: t.interpolate(t => `translateY(-${t}%)`) }}\n            >\n              <animated.div\n                className=\"home__wrapper\"\n                style={{\n                  opacity: o.interpolate(o => o),\n                  transform: s.interpolate(s => `rotate(-45deg) scale(${s})`)\n                }}\n              >\n                <BlockquoteStart ready={ready} />\n                <Title ready={ready} />\n                <BlockquoteEnd ready={ready}>\n                  <BlockquoteEndContent ready={ready} />\n                </BlockquoteEnd>\n                <div className=\"home__menu\">\n                  <Abstract state={navState} />\n                  <HomeNav\n                    ready={ready}\n                    items={RELEASES_ID}\n                    from={50}\n                    section=\"releases\"\n                  />\n                  <HomeNav\n                    ready={ready}\n                    items={VIDEOS_ID}\n                    from={-50}\n                    section=\"videos\"\n                    onRest={this.props.onNext}\n                  />\n                </div>\n              </animated.div>\n            </animated.header>\n          )}\n        </HomeSpring>\n        {/*<button onClick={this.props.onNext} style={{ position: 'absolute', zIndex: 5000}}>\n          NEXT\n        </button>*/}\n      </Fragment>\n    );\n  }\n}\n\nconst mapAppContextToProps = context => ({\n  state: context.value.ready.home.hero\n});\n\nexport default withApp(mapAppContextToProps)(Home);\n","import React, { PureComponent } from 'react';\nimport classNames from 'classnames';\nimport YouTube from 'react-youtube';\nimport { withApp } from 'Hoc';\nimport { HOME_BKGD_VIDEOID } from 'Constants';\n\nimport './index.scss';\n\nconst getInitialState = ({ state }) => {\n  const showPlayer = ['idle', 'mounted'].indexOf(state) === -1;\n\n  return {\n    playerState: showPlayer ? state : null,\n    showPlayer\n  };\n};\n\nclass HomeBkgd extends PureComponent {\n  state = getInitialState(this.props);\n\n  _player = null;\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { showPlayer, playerState } = getInitialState(nextProps);\n\n    if (\n      showPlayer !== prevState.showPlayer ||\n      playerState !== prevState.playerState\n    )\n      return {\n        playerState,\n        showPlayer\n      };\n\n    return null;\n  }\n\n  //\n  // Life cycle\n  // --------------------------------------------------\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    return prevState.playerState !== this.state.playerState;\n  }\n\n  componentDidMount() {\n    this._shouldForceOnReady();\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (snapshot === true) return this._togglePlayer();\n\n    this._shouldForceOnReady();\n  }\n\n  //\n  // Helpers\n  // --------------------------------------------------\n\n  _shouldForceOnReady() {\n    if (this.props.state === 'mounted' && this._hasNext()) {\n      this.props.onSend('HERO.NEXT');\n    }\n  }\n\n  _togglePlayer() {\n    const { playerState } = this.state;\n\n    if (!this._player || !playerState) return;\n\n    try {\n      this._player[playerState]();\n    } catch (e) {\n      // console.log(e)\n    }\n  }\n\n  _hasNext = () => this.props.getNextEvents().indexOf('HERO.NEXT') !== -1;\n\n  //\n  // Events Handlers\n  // --------------------------------------------------\n\n  handleOnEnd = e => {\n    e.target.playVideo();\n  };\n\n  handleOnReady = ({ target }) => {\n    target.mute();\n    this._player = target;\n  };\n\n  handleOnPlay = ({ target }) => {\n    this._player = target;\n\n    if (this.state.playerState !== 'playVideo') this._player.pauseVideo();\n\n    if (this._hasNext()) {\n      this.props.onSend('HERO.NEXT');\n    }\n  };\n\n  //\n  // Renderers\n  // --------------------------------------------------\n\n  playerRenderer() {\n    const { showPlayer } = this.state;\n\n    if (!showPlayer) {\n      this._player = null;\n      return null;\n    }\n\n    // https://codebushi.com/react-youtube-background/\n    // https://developers.google.com/youtube/player_parameters\n    const videoOptions = {\n      playerVars: {\n        autoplay: 1, // Auto-play the video on load\n        disablekb: 1,\n        controls: 0, // Hide pause/play buttons in player\n        showinfo: 0, // Hide the video title\n        modestbranding: 1, // Hide the Youtube Logo\n        loop: 1, // Run the video in a loop\n        fs: 0, // Hide the full screen button\n        autohide: 0, // Hide video controls when playing\n        rel: 0,\n        enablejsapi: 1\n      }\n    };\n\n    return (\n      <YouTube\n        videoId={HOME_BKGD_VIDEOID}\n        opts={videoOptions}\n        className=\"home-video__background__foreground__iframe\"\n        // onStateChange={this.handleOnStateChange('onStateChange')}\n        // onPlaybackRateChange={this.handleOnStateChange('onPlaybackRateChange')}\n        // onPlaybackQualityChange={this.handleOnStateChange('onPlaybackQualityChange')}\n        onPlay={this.handleOnPlay}\n        // onError={this.handleOnStateChange('onError')}\n        onReady={this.handleOnReady}\n        onEnd={this.handleOnEnd}\n      />\n    );\n  }\n\n  render() {\n    if (this.props.state === 'idle') return null;\n\n    const { showPlayer, playerState } = this.state;\n\n    const className = classNames('home-video', {\n      'home-video--mobile': !showPlayer,\n      'home-video--paused': playerState === 'pauseVideo'\n    });\n\n    return (\n      <div className={className}>\n        <div className=\"home-video__background\">{this.playerRenderer()}</div>\n      </div>\n    );\n  }\n}\n\nconst mapAppContextToProps = context => ({\n  state: context.value.ready.home.bkgd\n});\n\nexport default withApp(mapAppContextToProps)(HomeBkgd);\n","import React, { Fragment } from 'react';\nimport Hero from './Hero';\nimport Bkgd from './Bkgd';\n\nconst Home = () => (\n  <Fragment>\n    <Hero />\n    <div className=\"home-bkgd\" />\n    <Bkgd />\n  </Fragment>\n);\n\nexport default Home;\n","import React, { useContext } from 'react';\nimport { VideoContext } from 'Contexts';\nimport { getVideoUrl } from 'Utils';\n\nconst Thumb = ({ onClick }) => {\n  const { videoId, state, playerState, playerReady } = useContext(VideoContext);\n\n  if (!videoId || state === 'idle') return null;\n\n  const isPayling = playerState === 'playVideo';\n  const showSpinner = state !== 'leaving' && !playerReady;\n  const style = {\n    backgroundImage: `url(${getVideoUrl(`${videoId}-lg.jpg`)})`,\n    opacity: isPayling ? 0 : 1,\n    pointerEvents: playerReady && isPayling ? 'none' : 'auto'\n  };\n\n  return (\n    <div onClick={onClick} className=\"videos__thumb\" style={style}>\n      {showSpinner && (\n        <div className=\"videos__spinner\">\n          <div />\n          <div />\n          <div />\n          <div />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Thumb;\n","import React, { useContext } from 'react';\nimport { VideoContext } from 'Contexts';\nimport { VIDEOS } from 'Constants';\n\nconst Legend = () => {\n  const { videoId } = useContext(VideoContext);\n  if (!videoId) return null;\n  const { title, description } = VIDEOS[videoId];\n  return (\n    <div>\n      <h3>{title}</h3>\n      <h4>{description}</h4>\n    </div>\n  );\n};\n\nexport default Legend;\n","import React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { VideoContext } from 'Contexts';\nimport { getVideoUrl } from 'Utils';\nimport { VIDEOS_ID } from 'Constants';\n\nconst NextLink = () => {\n  const { videoId } = useContext(VideoContext);\n  const videoIndex = VIDEOS_ID.findIndex(v => v === videoId);\n  if (videoIndex === -1) return null;\n  const index = (videoIndex + 1) % VIDEOS_ID.length;\n  const next = VIDEOS_ID[index] || null;\n\n  if (!next) return null;\n\n  return (\n    <Link to={`/videos/${next}`}>\n      <img src={getVideoUrl(`${next}-md.jpg`)} alt=\"\" />\n    </Link>\n  );\n};\n\nexport default NextLink;\n","import React, { PureComponent } from 'react';\nimport { Keyframes, animated, interpolate } from 'react-spring';\nimport { Link } from 'react-router-dom';\nimport YouTube from 'react-youtube';\nimport classNames from 'classnames';\nimport { VideoContext } from 'Contexts';\nimport { getInitialContext } from 'Contexts/Video';\nimport { withApp } from 'Hoc';\nimport { VIDEOS } from 'Constants';\nimport Thumb from './Thumb';\nimport Legend from './Legend';\nimport NextLink from './Next';\n\nimport './index.scss';\n\nconst _defaultProps = { b: 500, s: 1, t: 5, o: 0 };\nconst _mountedProps = { b: 100, s: 1, t: 0, o: 1 };\n\nconst VideoSpring = Keyframes.Spring({\n  idle: { immediate: true, from: _defaultProps, to: _defaultProps },\n  entering: { to: _mountedProps, from: _defaultProps },\n  // mounted: { s: 1, t: 0, o: 1 },\n  leaving: _defaultProps\n});\n\nconst getId = ({ current, next, previous }) =>\n  current || previous || next || null;\n\nconst getInitialState = ({ state, videoId }) => ({\n  ...getInitialContext(),\n  videoId,\n  state\n});\n\nclass Videos extends PureComponent {\n  state = getInitialState(this.props);\n\n  _player = null;\n\n  _videoOpts = {\n    width: 854,\n    height: 480,\n    playerVars: {\n      // https://developers.google.com/youtube/player_parameters\n      autoplay: 0, // Auto-play the video on load\n      disablekb: 1,\n      controls: 0, // Hide pause/play buttons in player\n      showinfo: 0, // Hide the video title\n      modestbranding: 1, // Hide the Youtube Logo\n      loop: 0, // Run the video in a loop\n      fs: 0, // Hide the full screen button\n      autohide: 2, // Hide video controls when playing\n      rel: 0,\n      enablejsapi: 1\n    }\n  };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { videoId, state, isMounted } = nextProps;\n\n    if (prevState.playerState === 'playVideo' && !isMounted)\n      return getInitialState(nextProps);\n\n    if (videoId !== prevState.videoId)\n      return {\n        playState: 'pauseVideo',\n        videoId\n      };\n    // return getInitialState(nextProps)\n\n    if (state !== prevState.state)\n      return {\n        state\n      };\n\n    return null;\n  }\n\n  //\n  // Life cycle\n  // --------------------------------------------------\n\n  //\n  // Helpers\n  // --------------------------------------------------\n\n  _setPlayerState = playerState => this.setState({ playerState });\n\n  //\n  // Events Handlers\n  // --------------------------------------------------\n\n  handleOnRest = () => {\n    this.props.onNext();\n  };\n\n  handleOnReady = ({ target }) => {\n    this._player = target;\n    this.setState({ playerReady: true, playerState: 'pauseVideo' });\n  };\n\n  handleOnClick = () => {\n    if (!this._player || !this.state.playerReady) return;\n\n    this._player.playVideo();\n\n    // const playerState = this.state.playerState === 'pauseVideo' ? 'playVideo' : 'pauseVideo';\n\n    // this.setState({playerState}, () => this._player[playerState]());\n  };\n\n  handleOnPlay = () => {\n    this._setPlayerState('playVideo');\n  };\n\n  handleOnPause = () => {\n    this._setPlayerState('pauseVideo');\n  };\n\n  //\n  // Renderers\n  // --------------------------------------------------\n\n  playerRenderer() {\n    if (!this.props.isMounted) return null;\n\n    return (\n      <YouTube\n        containerClassName=\"videos__player\"\n        videoId={VIDEOS[this.state.videoId].videoId}\n        opts={this._videoOpts}\n        onReady={this.handleOnReady}\n        // onError={console.log}\n        // onStateChange={console.log}\n        // onPlaybackRateChange={console.log}\n        // onPlaybackQualityChange={console.log}\n        onPlay={this.handleOnPlay}\n        onPause={this.handleOnPause}\n      />\n    );\n  }\n\n  render() {\n    const { state, playerReady } = this.state;\n\n    const className = classNames('videos', {\n      'videos--mounted': this.props.isMounted,\n      'videos--ready': playerReady\n    });\n\n    return (\n      <VideoContext.Provider value={this.state}>\n        <VideoSpring native state={state} onRest={this.handleOnRest}>\n          {({ b, o, s, t }) => (\n            <animated.div\n              style={{ backgroundSize: b.interpolate(t => `${t}% ${t}%`) }}\n              className={className}\n            >\n              <Link className=\"videos__close\" to=\"/\" />\n              <animated.div\n                className=\"videos__content\"\n                style={{\n                  opacity: o.interpolate(o => o),\n                  transform: interpolate(\n                    [s, t],\n                    (s, t) => `scale(${s}) translateY(${t}%)`\n                  )\n                }}\n              >\n                <Thumb onClick={this.handleOnClick} />\n                {this.playerRenderer()}\n                <div className=\"videos__legend\">\n                  <Legend />\n                  <NextLink />\n                </div>\n              </animated.div>\n            </animated.div>\n          )}\n        </VideoSpring>\n      </VideoContext.Provider>\n    );\n  }\n}\n\nconst mapContextToProps = context => ({\n  isActive: !context.matches('ready.videos.idle'),\n  isMounted: context.matches('ready.videos.mounted'),\n  videoId:\n    getId(context.context.section) === 'videos'\n      ? getId(context.context.id)\n      : null,\n  state: context.value.ready.videos\n});\n\nexport default withApp(mapContextToProps)(Videos);\n","import Data from './dates.json';\n\nconst { dates, countries, cities, bands } = Data.reduce(\n  (a, c) => {\n    const { city, country, date, bands } = c;\n    const { year, mounth } = date;\n\n    // dates\n    if (!a.dates[year]) a.dates[year] = {};\n    if (!a.dates[year][mounth]) a.dates[year][mounth] = [];\n    a.dates[year][mounth].push(c);\n\n    // cities\n    const code = `${country}__${city}`;\n    if (!a.cities[code]) a.cities[code] = 1;\n    else ++a.cities[code];\n\n    //countries\n    if (!a.countries[country]) a.countries[country] = 1;\n    else ++a.countries[country];\n\n    // bands\n    bands.forEach(band => {\n      if (!a.bands[band]) a.bands[band] = 1;\n      else ++a.bands[band];\n    });\n\n    return a;\n  },\n  { dates: {}, countries: {}, cities: {}, bands: {} }\n);\n\nconst ListSorted = l =>\n  Object.keys(l)\n    .map(k => [k, l[k]])\n    .sort((a, b) => b[1] - a[1]);\n\nconst Lists = {\n  Countries: ListSorted(countries),\n  Cities: ListSorted(cities),\n  Bands: ListSorted(bands),\n  Dates: dates\n};\n\nexport const DatesByRange = (f, t) => {\n  const _fDate = new Date(f.year, f.mounth, f.day);\n  const _from = _fDate.getTime();\n  const _tDate = new Date(t.year, t.mounth, t.day);\n  const _to = _tDate.getTime();\n\n  return Data.filter(({ date: { year, mounth, day } }) => {\n    const _sDate = new Date(year, mounth, day);\n    const _date = _sDate.getTime();\n    return _date >= _from && _date <= _to;\n  });\n};\n\nexport default Lists;\n","import React, { PureComponent } from 'react';\nimport classNames from 'classnames';\nimport { withApp } from 'Hoc';\nimport Lists from './Data';\n// import { DatesByRange } from './Data'\nimport './index.scss';\n\nconst { Dates, Countries, Cities, Bands } = Lists;\n\n// console.log(DatesByRange({year: 2007, mounth: 5, day: 1 }, {year: 2007, mounth: 6, day: 1 }))\n\nclass Shows extends PureComponent {\n  //\n  // Life cycle\n  // --------------------------------------------------\n\n  //\n  // Helpers\n  // --------------------------------------------------\n\n  //\n  // Events Handlers\n  // --------------------------------------------------\n\n  //\n  // Renderers\n  // --------------------------------------------------\n\n  render() {\n    const { isActive } = this.props;\n\n    const className = classNames('shows layer', {\n      'layer--active': isActive,\n      'shows--active': isActive\n    });\n\n    return (\n      <div className={className}>\n        <div>\n          <h1>Show</h1>\n          <ul>\n            {Object.keys(Dates).map(year => (\n              <li key={`shows__fulllist__${year}`}>\n                <strong>{year}</strong>\n                <ul>\n                  {Object.keys(Dates[year]).map(mounth => (\n                    <li key={`shows__fulllist__${year}__${mounth}`}>\n                      <strong>{mounth}</strong>\n                      <ul>\n                        {Dates[year][mounth].map((show, i) => (\n                          <li key={`shows__fulllist__${year}__${mounth}__${i}`}>\n                            - {show.date.day} : {show.city}, {show.country}\n                          </li>\n                        ))}\n                      </ul>\n                    </li>\n                  ))}\n                </ul>\n              </li>\n            ))}\n          </ul>\n          <hr />\n          <h1>Bands</h1>\n          <ul>\n            {Bands.map(([band, values], i) => (\n              <li key={`shows__listbands__${i}`}>\n                <strong>{band}</strong> ({values})\n              </li>\n            ))}\n          </ul>\n          <hr />\n          <h1>Countries</h1>\n          <ul>\n            {Countries.map(([country, values], i) => (\n              <li key={`shows__listcountries__${i}`}>\n                <strong>{country}</strong> ({values})\n              </li>\n            ))}\n          </ul>\n          <hr />\n          <h1>Cities</h1>\n          <ul>\n            {Cities.map(([code, values], i) => {\n              const [country, city] = code.split('__');\n              return (\n                <li key={`shows__listcities__${i}`}>\n                  <strong>\n                    {city}, {country}\n                  </strong>{' '}\n                  ({values})\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapContextToProps = context => ({\n  isActive: !context.matches('ready.shows.idle')\n});\n\nexport default withApp(mapContextToProps)(Shows);\n","import React, { PureComponent, Fragment } from 'react';\nimport { AppContext } from 'Contexts/App';\nimport Home from 'Sections/Home';\nimport Releases, { ReleasesLoading } from 'Sections/Releases';\nimport Videos from 'Sections/Videos';\nimport Shows from 'Sections/Shows';\nimport ImgErr from './img_error.jpg';\n\nconst _DEBUG = false;\n\nexport default class Layout extends PureComponent {\n  state = { hasError: false };\n\n  static contextType = AppContext;\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  //\n  // Life cycle\n  // --------------------------------------------------\n\n  componentDidCatch(error, info) {\n    console.log(info.componentStack);\n  }\n\n  //\n  // Helpers\n  // --------------------------------------------------\n\n  _hasErrorBoundary = () =>\n    this.state.hasError || this.context.matches('fatal');\n\n  //\n  // Events Handlers\n  // --------------------------------------------------\n\n  //\n  // Renderers\n  // --------------------------------------------------\n\n  miniDebugRenderer() {\n    if (!_DEBUG) return null;\n\n    return (\n      <div className=\"mini-debug\">\n        <pre>{JSON.stringify(this.context.value, null, 2)}</pre>\n        <pre>{JSON.stringify(this.context.toStrings(), null, 2)}</pre>\n        <pre>{JSON.stringify(this.context.context, null, 2)}</pre>\n        <pre>{JSON.stringify(this.context.nextEvents, null, 2)}</pre>\n      </div>\n    );\n  }\n\n  errorBoundaryRenderer() {\n    return (\n      <div className=\"error-boundary\">\n        <div>\n          <img src={ImgErr} alt=\"\" />\n          <h1>Whoops, something went wrong.</h1>\n          <a href={process.env.PUBLIC_URL}>Reload the page</a>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    if (this._hasErrorBoundary()) return this.errorBoundaryRenderer();\n\n    if (!this.context.matches('ready')) return <ReleasesLoading />;\n\n    return (\n      <Fragment>\n        <Home />\n        <Releases />\n        <Videos />\n        <Shows />\n        {this.miniDebugRenderer()}\n      </Fragment>\n    );\n  }\n}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport { AppContext } from 'Contexts';\nimport Layout from 'Layout';\n// import Layout from 'Layout/Debug'\nimport registerServiceWorker from 'registerServiceWorker';\n\nimport 'Scss/index.scss';\n\nconst MainRoute = () => (\n  <AppContext>\n    <Layout />\n  </AppContext>\n);\n\nconst App = () => (\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <Route path=\"/:section?/:id?\" component={MainRoute} />\n  </BrowserRouter>\n);\n\nReactDOM.render(<App />, document.getElementById('app-root'));\n\nregisterServiceWorker();\n","import React, { PureComponent } from 'react';\nimport hoistStatics from 'hoist-non-react-statics';\nimport _get from 'lodash.get';\nimport { AppContext } from 'Contexts/App';\nimport Machine from 'Machines';\nimport { getComponentName } from 'Utils';\n\nconst withApp = (mapContextToProps = v => v) => WrappedComponent => {\n  class AppHoc extends PureComponent {\n    static contextType = AppContext;\n\n    //\n    // Helpers\n    // --------------------------------------------------\n\n    getStateByPath = path => _get(this.context.value, path);\n\n    getValue = () => this.context.value;\n\n    getStrings = () => this.context.toStrings();\n\n    getNextEvents = () => this.context.nextEvents;\n\n    getContext = () => this.context.context;\n\n    stateMatches = state => this.context.matches(state);\n\n    isReady = () => this.context.matches('ready');\n\n    hasVideoHeader = () =>\n      ['desktop', 'laptop'].indexOf(this.getDevice()) !== -1;\n\n    getDevice = () => this.getContext().device;\n\n    isDevice = device => this.getDevice() === device;\n\n    isDesktop = () => this.isDevice('desktop');\n\n    isTablet = () => this.isDevice('tablet');\n\n    isMobile = () => this.isDevice('mobild');\n\n    isLandscape = () => this.getContext().orientation === 'landscape';\n\n    bkgdCanPlay = () => {\n      const { current, previous, next } = this.getContext().section;\n      return (\n        this.hasVideoHeader() &&\n        current === 'home' &&\n        previous === null &&\n        next === null\n      );\n    };\n\n    getHelpers = () => ({\n      getStateByPath: this.getStateByPath,\n      getStrings: this.getStrings,\n      getValue: this.getValue,\n      getNextEvents: this.getNextEvents,\n      getContext: this.getContext,\n      stateMatches: this.stateMatches,\n      isReady: this.isReady,\n      hasVideoHeader: this.hasVideoHeader,\n      bkgdCanPlay: this.bkgdCanPlay,\n      isDesktop: this.isDesktop,\n      isTablet: this.isTablet,\n      isMobile: this.isMobile,\n      isLandscape: this.isLandscape\n    });\n\n    //\n    // Events Handlers\n    // --------------------------------------------------\n\n    hanleOnSend = evt => Machine.send(evt);\n\n    hanleOnNext = () => this.hanleOnSend('NEXT');\n\n    // Renderers\n    // --------------------------------------------------\n\n    render() {\n      const { props } = this;\n\n      return (\n        <WrappedComponent\n          {...mapContextToProps(this.context, props)}\n          {...props}\n          {...this.getHelpers()}\n          onNext={this.hanleOnNext}\n          onSend={this.hanleOnSend}\n        />\n      );\n    }\n  }\n\n  AppHoc.displayName = `withApp(${getComponentName(WrappedComponent)})`;\n\n  hoistStatics(AppHoc, WrappedComponent);\n\n  return AppHoc;\n};\n\nexport default withApp;\n","import React, { PureComponent } from 'react';\nimport hoistStatics from 'hoist-non-react-statics';\nimport _get from 'lodash.get';\nimport withApp from './App';\nimport { ReleasesLoading } from 'Sections/Releases';\nimport { getComponentName, ImgsPrefetch } from 'Utils';\n\n// const getStateFromProps = ({ state, story, isLeaving, isCurrent, isPrevious }) => ({\n//   state,\n//   story,\n// })\n\nconst getReleaseStage = value =>\n  typeof value === 'string' ? value : Object.keys(value)[0];\n\nconst withRelease = (WrappedComponent, { release, assets = null }) => {\n  class ReleaseHoc extends PureComponent {\n    state = {\n      assetsLoaded: assets === null,\n      assetsLoading: false\n    };\n\n    //\n    // Life cycle\n    // --------------------------------------------------\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n      return prevProps.state === 'idle' && this.props.state !== 'idle';\n    }\n\n    componentDidMount() {\n      if (\n        this.props.state !== 'idle' &&\n        !this.state.assetsLoaded &&\n        !this.state.assetsLoading\n      )\n        this.handleOnLoadAssets();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n      if (snapshot && !this.state.assetsLoaded && !this.state.assetsLoading)\n        this.handleOnLoadAssets();\n    }\n\n    //\n    // Helpers\n    // --------------------------------------------------\n\n    _loadAssets = () => {\n      ImgsPrefetch(assets, true).then(() =>\n        this.setState({ assetsLoading: false, assetsLoaded: true })\n      );\n    };\n\n    //\n    // Events Handlers\n    // --------------------------------------------------\n\n    handleOnLoadAssets = () =>\n      this.setState({ assetsLoading: true }, () => this._loadAssets());\n\n    handleOnMounted = evt => () => this.props.onSend(evt);\n\n    handleOnNext = evt => () => {\n      if (this.props.stateMatches(`ready.releases.${evt}`)) this.props.onNext();\n    };\n\n    //\n    // Renderers\n    // --------------------------------------------------\n\n    render() {\n      const { state, story } = this.props;\n\n      if (state === 'idle') return null;\n\n      if (!this.state.assetsLoaded) return <ReleasesLoading />;\n\n      return (\n        <div className={`release release--${release}`}>\n          <WrappedComponent\n            state={state}\n            story={story}\n            onNext={this.handleOnNext}\n            onMounted={this.handleOnMounted}\n          />\n        </div>\n      );\n    }\n  }\n\n  ReleaseHoc.displayName = `withRelease(${getComponentName(WrappedComponent)})`;\n\n  hoistStatics(ReleaseHoc, WrappedComponent);\n\n  const idleResponse = () => ({\n    state: 'idle',\n    story: false\n  });\n\n  return withApp(context => {\n    if (context.matches('ready.releases.idle')) return idleResponse();\n\n    const {\n      section: { previous },\n      id: { previous: previousId, current: currentId }\n    } = context.context;\n\n    const isCurrent = currentId === release;\n    const isPrevious = previousId === release;\n    const isLeaving = isPrevious && previous === 'releases';\n\n    if (!isPrevious && !isCurrent) return idleResponse();\n\n    if (isPrevious && !isLeaving)\n      return {\n        state: context.history\n          ? getReleaseStage(_get(context.history.value, 'ready.releases'))\n          : 'mounted',\n        story: context.history\n          ? context.history.matches('ready.releases.mounted.story')\n          : false\n      };\n\n    return {\n      state: getReleaseStage(_get(context.value, 'ready.releases')),\n      story: context.matches('ready.releases.mounted.story')\n    };\n  })(ReleaseHoc);\n};\n\nexport default withRelease;\n","export { default as withApp } from './App';\nexport { default as withRelease } from './Release';\n","import React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport merge from 'lodash.merge';\nimport Machine from 'Machines';\nimport {\n  getViewport,\n  getRouteSection,\n  getRouteId,\n  getRouteParams,\n  StoryTrigger\n} from 'Utils';\nimport { MEDIA_QUERIES_LIST, MEDIA_QUERIES_BY_MATCH } from 'Constants';\n\nconst defaultViewport = {\n  width: 0,\n  height: 0,\n  device: null,\n  orientation: null\n};\n\nconst setCurrentMediaQueries = mq => ({\n  ...MEDIA_QUERIES_BY_MATCH[mq.media],\n  ...getViewport()\n});\n\nconst getInitialViewPort = () =>\n  MEDIA_QUERIES_LIST.reduce((a, mq) => {\n    const q = window.matchMedia(mq.match);\n    if (q.matches) a = setCurrentMediaQueries(q);\n    return a;\n  }, defaultViewport);\n\nconst getInitialContext = (props = null) =>\n  merge({}, Machine.initialContext(), {\n    section: {\n      current: getRouteSection(props)\n    },\n    id: {\n      current: getRouteId(props)\n    },\n    ...getInitialViewPort()\n  });\n\nexport const AppContext = React.createContext(getInitialContext());\n\nexport const { Provider, Consumer } = AppContext;\n\nclass App extends Component {\n  state = {\n    machine: Machine.initialState(),\n    pathname: this.props.location.pathname\n  };\n\n  _escActive = false;\n\n  service = Machine.init(getInitialContext(this.props), {\n    activities: {\n      waitingForStoryTrigger: ctx => this._setWaitingForStoryTrigger(ctx),\n      listenEscKey: ctx => this._setListenEscKey()\n    }\n  })\n    .get()\n    .onTransition(current => this.handleOnTransition(current));\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const {\n      location: { pathname }\n    } = nextProps;\n\n    if (pathname !== prevState.pathname)\n      return {\n        pathname\n      };\n\n    return null;\n  }\n\n  //\n  // Life cycle\n  // --------------------------------------------------\n\n  componentDidMount() {\n    window.addEventListener('resize', this.handleOnResize, { passive: true });\n    window.addEventListener('keydown', this.handleOnKeydown);\n\n    MEDIA_QUERIES_LIST.forEach(mq => {\n      const q = window.matchMedia(mq.match);\n      q.addListener(this.handleOnMediaQuery);\n    });\n\n    this.service.start();\n    this.service.devTools.init(this.state.machine);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleOnResize);\n\n    this.service.stop();\n  }\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    return prevState.pathname !== this.props.location.pathname;\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (snapshot) this._sectionNavigate();\n  }\n\n  //\n  // Helpers\n  // --------------------------------------------------\n\n  _send = evt => {\n    this.service.send(evt);\n  };\n\n  _setServiceContext = (context = {}) =>\n    this._send({ type: 'SET.CONTEXT', context });\n\n  _sectionNavigate = () => {\n    const { section = 'home', id = null } = getRouteParams(this.props);\n    const {\n      section: { current: currentSection },\n      id: { current: currentId }\n    } = this.state.machine.context;\n\n    if (currentSection !== section)\n      return this._send({\n        type: 'SECTION.NAVIGATE',\n        context: {\n          section: {\n            next: section\n          },\n          id: {\n            next: id\n          }\n        }\n      });\n\n    if (currentId !== id)\n      return this._send({ type: 'SECTION.NAVIGATE.ID', id });\n  };\n\n  _setWaitingForStoryTrigger = ctx => {\n    StoryTrigger.start(ctx.id.current, this.handleOnStoryTrigger);\n    return () => StoryTrigger.stop();\n  };\n\n  _setListenEscKey = ctx => {\n    this._escActive = true;\n    return () => (this._escActive = false);\n  };\n\n  //\n  // Events Handlers\n  // --------------------------------------------------\n\n  handleOnMediaQuery = mq => {\n    if (mq.matches) this._setServiceContext(setCurrentMediaQueries(mq));\n  };\n\n  handleOnResize = () => {\n    this._setServiceContext(getViewport());\n  };\n\n  handleOnTransition = machine => {\n    if (!machine.changed) return;\n    this.setState({ machine });\n  };\n\n  handleOnStoryTrigger = _id => {\n    const {\n      context: {\n        id: { current }\n      }\n    } = this.state.machine;\n    if (_id !== current) {\n      console.error('handleOnStoryTrigger wrong release', { current, _id });\n      return;\n    }\n    this._send('RELEASE.STORY');\n  };\n\n  handleOnKeydown = ({ keyCode }) => {\n    if (this._escActive && keyCode === 27) this.props.history.push('/');\n  };\n\n  //\n  // Renderers\n  // --------------------------------------------------\n\n  render() {\n    return (\n      <Provider value={this.state.machine}>{this.props.children}</Provider>\n    );\n  }\n}\n\nexport default withRouter(App);\n","const envPublicUrl = process.env.PUBLIC_URL;\n\nexport const getStaticUrl = relativePath =>\n  `${envPublicUrl}/static/${relativePath}`;\n\nexport const getImageUrl = path => getStaticUrl(`images/${path}`);\nexport const getPhotoUrl = path => getStaticUrl(`photos/${path}`);\n","import throttle from 'lodash.throttle';\nimport { STORY_TRIGGER_EVENTS, STORY_TRIGGER_THROTTLE } from 'Constants';\n\nclass StoryTrigger {\n  constructor() {\n    this._eventsBound = false;\n    this._releaseId = null;\n    this._callback = null;\n\n    this._handleEvent = throttle(this._handleEvent, STORY_TRIGGER_THROTTLE);\n  }\n\n  _bindEvents = () => {\n    if (this._eventsBound) return;\n\n    STORY_TRIGGER_EVENTS.forEach(e => {\n      document.addEventListener(e, this._handleEvent, {\n        capture: true,\n        passive: true\n      });\n    });\n    this._eventsBound = true;\n  };\n\n  _unbindEvents = () => {\n    if (!this._eventsBound) return;\n\n    STORY_TRIGGER_EVENTS.forEach(e => {\n      document.removeEventListener(e, this._handleEvent, {\n        capture: true,\n        passive: true\n      });\n    });\n    this._eventsBound = false;\n  };\n\n  _handleEvent = () => {\n    if (this._releaseId === null) return;\n    this._callback(this._releaseId);\n    this.stop();\n  };\n\n  start(_releaseId, _callback) {\n    if (this._releaseId !== null) {\n      const msg =\n        this._releaseId === _releaseId\n          ? 'StoryTrigger already started'\n          : 'StoryTrigger binded to another release';\n      console.error(msg, this._releaseId, _releaseId);\n      return;\n    }\n\n    this._releaseId = _releaseId;\n    this._callback = _callback;\n  }\n\n  stop() {\n    this._releaseId = null;\n    this._callback = null;\n  }\n}\n\nconst inst = new StoryTrigger();\ninst._bindEvents();\n\nexport default inst;\n","// https://lesdieuxducode.com/blog/2018/7/charger-des-images-lors-du-scroll-avec-lintersectionobserver\n\nexport default class ImgTracker {\n  static observedImages = new Map();\n\n  static Observer =\n    'IntersectionObserver' in window\n      ? new IntersectionObserver(\n          entries => {\n            entries.forEach(entry => {\n              if (entry.intersectionRatio > 0) {\n                let elt = entry.target;\n                ImgTracker.observedImages.get(elt)();\n                ImgTracker.unobserve(elt);\n              }\n            });\n          },\n          {\n            rootMargin: '50px 50px',\n            threshold: 0.01\n          }\n        )\n      : null;\n\n  static observe(elt, callback) {\n    if (ImgTracker.Observer != null) {\n      ImgTracker.Observer.observe(elt);\n      ImgTracker.observedImages.set(elt, callback);\n    } else {\n      callback();\n    }\n  }\n\n  static unobserve(elt) {\n    if (ImgTracker.Observer != null) {\n      ImgTracker.observedImages.delete(elt);\n      ImgTracker.Observer.unobserve(elt);\n    }\n  }\n}\n","import { getStaticUrl } from './Paths';\n\nconst _LOADED_IMGS = new Map();\n\nexport const ImgPrefetch = (path, inStatic = false) =>\n  new Promise((resolve, reject) => {\n    if (_LOADED_IMGS.has(path)) return resolve(_LOADED_IMGS.get(path));\n\n    const image = new Image();\n\n    image.src = inStatic ? path : getStaticUrl(path);\n    image.onerror = () =>\n      reject(new Error(`could not load image: ${path} :: ${image.src}`));\n    image.onload = () => {\n      _LOADED_IMGS.set(path, image.src);\n      return resolve(image.src);\n    };\n  });\n\nexport const ImgsPrefetch = (paths, inStatic = false) =>\n  Promise.all(paths.map(p => ImgPrefetch(p, inStatic)));\n","import _get from 'lodash.get';\nimport { actions } from 'xstate';\n\nconst { log } = actions;\n\nexport const actionLog = (label = '') =>\n  log((context, event) => ({ context, event }), label);\n\n// const sendToTarget = send((ctx, event) => ({\n//   type: `SHOW.${ctx.section.current}`\n// }));\n\nexport const contextMatch = (obj, str) => {\n  const [path, value] = str.split(':');\n  return _get(obj, path) === value;\n};\n\nexport const doesCondMatches = (c1, c2) => (ctx, event) => {\n  return contextMatch(ctx, c1) && contextMatch(event, c2);\n};\n","import FontFaceObserver from 'fontfaceobserver';\nimport { APP_FONTS_LIST, APP_FONTS_TIMEOUT } from 'Constants';\n\nexport const ObserveFontsLoading = () => {\n  const observers = APP_FONTS_LIST.reduce((a, { name, weight }) => {\n    const font = new FontFaceObserver(name, { weight });\n    a.push(font.load(null, APP_FONTS_TIMEOUT));\n    return a;\n  }, []);\n\n  return Promise.all(observers);\n  // .then(() => {\n  //   console.log('fonts loaded')\n  //   return true\n  //  })\n  // .catch(err => {\n  //   console.warn('Some critical font are not available:', err);\n  //   return false\n  // });\n};\n","import { Globals, animated } from 'react-spring';\nimport { getStaticUrl } from './Paths';\n\nexport { default as StoryTrigger } from './StoryTrigger';\nexport { default as ImgTracker } from './ImgTracker';\nexport * from './ImgPrefetch';\nexport * from './Machines';\nexport * from './Fonts';\n\nexport const getComponentName = Component =>\n  Component.displayName || Component.name || 'Component';\n\nexport const AnimatedDiv = animated(Globals.defaultElement);\nexport const raf = cb => Globals.requestFrame(cb);\nexport const caf = cb => Globals.cancelFrame(cb);\n\nconst defaultRouteProps = { match: { params: { section: 'home', id: null } } };\n\nexport const getRouteParams = ({ match: { params } }) => params;\nexport const getRouteSection = (props = null) =>\n  getRouteParams(props || defaultRouteProps).section;\nexport const getRouteId = (props = null) =>\n  getRouteParams(props || defaultRouteProps).id;\n\nexport const getImageUrl = path => getStaticUrl(`images/${path}`);\nexport const getPhotoUrl = path => getStaticUrl(`photos/${path}`);\nexport const getVideoUrl = path => getStaticUrl(`videos/${path}`);\n\nexport const getViewport = () => {\n  const { width, height } = document.body.getBoundingClientRect();\n  return {\n    width,\n    height\n  };\n};\nexport const roundToEven = n => 2 * Math.round(n / 2);\n\nexport const getNavImgSrc = (section, item) => {\n  switch (section) {\n    case 'releases':\n      return getStaticUrl(`covers/${item}.jpg`);\n    case 'videos':\n      return getStaticUrl(`videos/${item}-md.jpg`);\n    // case 'shows': return getStaticUrl(`covers/${item}.jpg`)\n    default:\n    // do nothing\n  }\n};\n\n// https://github.com/MicheleBertoli/react-automata/blob/master/src/utils.js#L12\nexport const stringify = (state, path = []) => {\n  if (typeof state === 'string') {\n    return path.concat(state).join('.');\n  }\n\n  return Object.keys(state).reduce(\n    (prev, key) => prev.concat(stringify(state[key], path.concat(key))),\n    []\n  );\n};\n","import { send } from 'xstate';\nimport { contextMatch, doesCondMatches } from 'Utils';\n\nconst homeStates = {\n  type: 'parallel',\n  states: {\n    hero: {\n      initial: 'unknown',\n      states: {\n        unknown: {\n          on: {\n            '': [\n              {\n                target: 'entering',\n                cond: ctx => contextMatch(ctx, 'section.current:home')\n              },\n              { target: 'idle' }\n            ]\n          }\n        },\n        idle: {\n          on: {\n            NEXT: {\n              target: 'entering',\n              cond: ctx => contextMatch(ctx, 'section.current:home')\n            }\n          }\n        },\n        entering: {\n          on: {\n            'HERO.NEXT': 'mounted'\n          }\n        },\n        mounted: {\n          onEntry: 'clearSectionContext',\n          on: {\n            'SECTION.NAVIGATE': [\n              {\n                target: 'videos_in',\n                cond: doesCondMatches(\n                  'section.current:home',\n                  'context.section.next:videos'\n                ),\n                actions: 'setContext'\n              },\n              {\n                target: 'releases_in',\n                cond: doesCondMatches(\n                  'section.current:home',\n                  'context.section.next:releases'\n                ),\n                actions: 'setContext'\n              }\n            ]\n          }\n        },\n        releases_in: {\n          onEntry: 'setCurrentToPreviousSection',\n          on: {\n            NEXT: [\n              {\n                actions: ['setNextToCurrentSection', send('NEXT')],\n                cond: ctx =>\n                  contextMatch(ctx, 'section.previous:home') &&\n                  contextMatch(ctx, 'section.next:releases')\n              },\n              {\n                target: 'releases_out',\n                cond: ctx =>\n                  contextMatch(ctx, 'section.previous:releases') &&\n                  contextMatch(ctx, 'section.current:home')\n              }\n            ]\n          }\n        },\n        releases_out: {\n          on: {\n            'HERO.NEXT': 'mounted'\n          }\n        },\n        videos_in: {\n          onEntry: 'setCurrentToPreviousSection',\n          on: {\n            NEXT: [\n              {\n                actions: ['setNextToCurrentSection', send('NEXT')],\n                cond: ctx =>\n                  contextMatch(ctx, 'section.previous:home') &&\n                  contextMatch(ctx, 'section.next:videos')\n              },\n              {\n                target: 'videos_out',\n                cond: ctx =>\n                  contextMatch(ctx, 'section.previous:videos') &&\n                  contextMatch(ctx, 'section.current:home')\n              }\n            ]\n          }\n        },\n        videos_out: {\n          on: {\n            'HERO.NEXT': 'mounted'\n          }\n        }\n      }\n    },\n    bkgd: {\n      initial: 'unknown',\n      on: {\n        'CONTEXT.UPDATED': '.unknown'\n      },\n      states: {\n        unknown: {\n          on: {\n            '': [\n              { target: 'playVideo', cond: 'canPlayHomeVideo' },\n              { target: 'mounted', cond: 'canMountHomeVideo' },\n              { target: 'idle' }\n            ]\n          }\n        },\n        idle: {\n          on: {\n            NEXT: {\n              target: 'unknown',\n              cond: ctx => contextMatch(ctx, 'section.current:home')\n            }\n          }\n        },\n        mounted: {\n          on: {\n            NEXT: {\n              target: 'unknown',\n              cond: ctx =>\n                contextMatch(ctx, 'section.current:home') &&\n                ctx.section.previous !== null\n            },\n            'SECTION.NAVIGATE': {\n              target: 'unknown',\n              cond: (ctx, { context }) =>\n                context &&\n                context.section.next !== null &&\n                ctx.section.current === 'home'\n            }\n          }\n        },\n        playVideo: {\n          on: {\n            'SECTION.NAVIGATE': {\n              target: 'pauseVideo',\n              cond: (ctx, { context }) =>\n                context &&\n                context.section.next !== null &&\n                ctx.section.current === 'home'\n            }\n          }\n        },\n        pauseVideo: {\n          on: {\n            NEXT: {\n              target: 'unknown',\n              cond: ctx =>\n                contextMatch(ctx, 'section.current:home') &&\n                ctx.section.previous !== null\n            }\n          }\n        }\n      }\n    }\n  }\n};\n\nexport default homeStates;\n","import { send } from 'xstate';\nimport _merge from 'lodash.merge';\nimport { contextMatch } from 'Utils';\nimport { RELEASE_IDLE_TIMEOUT } from 'Constants';\n\nconst getSectionStates = section => ({\n  initial: 'unknown',\n  states: {\n    unknown: {\n      on: {\n        '': [\n          {\n            target: 'entering',\n            cond: ctx => contextMatch(ctx, `section.current:${section}`)\n          },\n          { target: 'idle' }\n        ]\n      }\n    },\n    idle: {\n      on: {\n        NEXT: {\n          target: 'entering',\n          cond: ctx => contextMatch(ctx, `section.current:${section}`)\n        }\n      }\n    },\n    entering: {\n      on: {\n        NEXT: {\n          target: 'mounted',\n          cond: ctx => contextMatch(ctx, `section.current:${section}`)\n        }\n      }\n    },\n    mounted: {\n      activities: ['listenEscKey'],\n      onEntry: 'clearSectionContext',\n      on: {\n        'SECTION.NAVIGATE': {\n          target: 'leaving',\n          cond: ctx => contextMatch(ctx, `section.current:${section}`),\n          actions: 'setContext'\n        },\n        'SECTION.NAVIGATE.ID': {\n          cond: ctx => contextMatch(ctx, `section.current:${section}`),\n          actions: ['setSectionId', send('CONTEXT.UPDATED')]\n        }\n      }\n    },\n    leaving: {\n      onEntry: 'setCurrentToPreviousSection',\n      on: {\n        NEXT: {\n          target: 'idle',\n          actions: ['setNextToCurrentSection', send('NEXT')],\n          cond: ctx =>\n            contextMatch(ctx, `section.previous:${section}`) &&\n            contextMatch(ctx, 'section.next:home')\n        }\n      }\n    }\n  }\n});\n\nexport const videos = _merge({}, getSectionStates('videos'));\nexport const shows = _merge({}, getSectionStates('shows'));\n\nexport const releases = _merge({}, getSectionStates('releases'), {\n  states: {\n    mounted: {\n      on: {\n        'SECTION.NAVIGATE.ID': {\n          target: 'entering'\n        }\n      },\n      initial: 'pending',\n      states: {\n        pending: {\n          initial: 'init',\n          states: {\n            init: {\n              after: {\n                [RELEASE_IDLE_TIMEOUT]: 'idle'\n              }\n            },\n            idle: {\n              on: {\n                'RELEASE.PENDING': 'init'\n              }\n            }\n          },\n          on: {\n            'RELEASE.STORY': 'story'\n          },\n          activities: ['waitingForStoryTrigger']\n        },\n        story: {\n          type: 'final'\n        }\n      }\n    }\n  }\n});\n","import { Machine, assign, send } from 'xstate';\nimport _merge from 'lodash.merge';\nimport { ObserveFontsLoading, ImgPrefetch, ImgsPrefetch } from 'Utils';\n// import { actionLog } from 'Utils'\nimport home from './HomeStates';\nimport { releases, videos, shows } from './SectionsStates';\nimport ImgBkgd from 'Sections/Home/Bkgd/home-bkgd.jpg';\nimport { APP_IMAGES_ONLOAD } from 'Constants';\n\nconst appMachine = Machine(\n  {\n    id: 'app',\n    context: {\n      section: {\n        current: 'home',\n        previous: null,\n        next: null\n      },\n      id: {\n        current: null,\n        previous: null,\n        next: null\n      },\n      width: 0,\n      height: 0,\n      device: null,\n      orientation: null\n    },\n    initial: 'loadind',\n    states: {\n      unknown: {},\n      loadind: {\n        invoke: {\n          src: 'loadAppAssets',\n          onDone: {\n            target: 'ready'\n          },\n          onError: {\n            target: 'fatal'\n          }\n        }\n      },\n      ready: {\n        type: 'parallel',\n        states: {\n          home,\n          releases,\n          videos,\n          shows\n        }\n      },\n      fatal: {\n        type: 'final'\n      }\n    },\n    on: {\n      'SET.CONTEXT': {\n        actions: ['setContext', send('CONTEXT.UPDATED')]\n      }\n    }\n  },\n  {\n    actions: {\n      setContext: assign((ctx, { context = {} }) => _merge({}, ctx, context)),\n      setNextToCurrentSection: assign(ctx =>\n        _merge({}, ctx, {\n          section: {\n            current: ctx.section.next,\n            next: null\n          },\n          id: {\n            current: ctx.id.next,\n            next: null\n          }\n        })\n      ),\n      setCurrentToPreviousSection: assign(ctx =>\n        _merge({}, ctx, {\n          section: {\n            previous: ctx.section.current,\n            current: null\n          },\n          id: {\n            previous: ctx.id.current,\n            current: null\n          }\n        })\n      ),\n      clearSectionContext: assign((ctx, e) =>\n        _merge({}, ctx, {\n          section: {\n            previous: null,\n            current: ctx.section.current,\n            next: null\n          },\n          id: {\n            previous: null,\n            current: ctx.id.current,\n            next: null\n          }\n        })\n      ),\n      setSectionId: assign((ctx, e) =>\n        _merge({}, ctx, {\n          id: {\n            previous: ctx.id.current,\n            current: e.id,\n            next: null\n          }\n        })\n      )\n    },\n    services: {\n      loadAppAssets: async context => {\n        const image = await ImgPrefetch(ImgBkgd, true).catch(e => false);\n        const images = await ImgsPrefetch(APP_IMAGES_ONLOAD).catch(e => false);\n        const fonts = await ObserveFontsLoading().catch(e => false);\n        const loaded = !!image && !!images && !!fonts;\n        return Promise[loaded ? 'resolve' : 'reject'](true);\n      }\n    },\n    guards: {\n      canPlayHomeVideo: ({ device, section: { current, next } }) =>\n        ['desktop', 'laptop'].indexOf(device) !== -1 &&\n        current === 'home' &&\n        next === null,\n      canMountHomeVideo: ({ section: { current, next } }) => current === 'home'\n      // && next === null\n    }\n  }\n);\n\nexport default appMachine;\n","import { interpret } from 'xstate';\nimport AppMachine from './App';\n\nexport { default as AppMachine } from './App';\nexport { default as ReleaseMachine } from './Release';\n\nclass MachineInterpret {\n  constructor() {\n    this._service = null;\n    this._started = false;\n\n    return this;\n  }\n\n  init(context, config) {\n    if (this._service !== null) throw new Error('Service already init');\n\n    this._service = interpret(\n      AppMachine.withContext(context).withConfig(config)\n    );\n\n    return this;\n  }\n\n  initialState() {\n    return AppMachine.initialState;\n  }\n\n  initialContext() {\n    return AppMachine.context;\n  }\n\n  get() {\n    if (this._service === null) throw new Error('No service init');\n\n    return this._service;\n  }\n\n  start() {\n    if (this._started) throw new Error('Service already started');\n\n    this.get().start();\n\n    this._started = true;\n  }\n\n  stop() {\n    if (!this._started) throw new Error('Service not started');\n\n    this.get().stop();\n\n    this._started = false;\n  }\n\n  send(o) {\n    return this.get().send(o);\n  }\n}\n\nconst Machine = new MachineInterpret();\n\nexport default Machine;\n","import { Machine, assign /*, send, sendParent, interpret*/ } from 'xstate';\nimport delay from 'delay';\nimport { RELEASE_IDLE_TIMEOUT } from 'Constants';\n\nconst getInitialContext = () => ({\n  release: undefined,\n  assets: null,\n  isLoaded: false,\n  isLeaving: false,\n  isCurrent: false,\n  isPrevious: false\n});\n\nconst ReleaseMachine = Machine(\n  {\n    id: 'Release',\n    initial: 'unknown',\n    context: getInitialContext(),\n    on: {\n      'RELEASE.NEXT': [\n        {\n          target: 'unmounted',\n          cond: (_, { context }) =>\n            !context.isCurrent && !context.isPrevious && !context.isLeaving\n        },\n        {\n          target: 'loading',\n          cond: (_, { context }) =>\n            context.isCurrent && (!_.isLoaded && !_.isCurrent)\n        },\n        {\n          target: 'entering',\n          cond: (_, { context }) =>\n            context.isCurrent && (_.isLoaded && !_.isCurrent)\n        },\n        {\n          target: 'mounted',\n          cond: (_, { context }) => context.isCurrent && _.isCurrent\n        },\n        {\n          target: 'leaving',\n          cond: (_, { context }) => !context.isCurrent && _.isCurrent\n        }\n      ]\n    },\n    states: {\n      unknown: {\n        on: {\n          '': [\n            { target: 'loading', cond: ctx => ctx.isCurrent && !ctx.isLoaded },\n            { target: 'entering', cond: ctx => ctx.isCurrent && ctx.isLoaded },\n            { target: 'unmounted' }\n          ]\n        }\n      },\n      unmounted: {\n        invoke: {\n          id: 'RELEASE.UNMOUNTED',\n          src: 'clearPrevious'\n        },\n        onExit: 'setContext'\n      },\n      loading: {\n        invoke: {\n          src: 'fetchAssets',\n          onDone: {\n            target: 'unknown',\n            actions: assign({ isLoaded: true })\n          },\n          onError: {\n            target: 'fatal'\n          }\n        }\n      },\n      fatal: {\n        type: 'final'\n      },\n      entering: {\n        onExit: 'setContext'\n      },\n      mounted: {\n        initial: 'pending',\n        states: {\n          pending: {\n            initial: 'init',\n            states: {\n              init: {\n                after: {\n                  [RELEASE_IDLE_TIMEOUT]: 'idle'\n                }\n              },\n              idle: {\n                on: {\n                  'RELEASE.PENDING': 'init'\n                }\n              }\n            },\n            on: {\n              'RELEASE.STORY': 'story'\n            },\n            activities: ['waitForAction']\n          },\n          story: {}\n        },\n        invoke: {\n          id: 'RELEASE.MOUNTED',\n          src: 'clearPrevious'\n        },\n        onExit: 'setContext'\n      },\n      leaving: {\n        initial: 'unknown',\n        states: {\n          unknown: {\n            on: {\n              '': [\n                { target: 'animate', cond: ctx => ctx.isLeaving },\n                { target: 'background' }\n              ]\n            }\n          },\n          animate: {},\n          background: {}\n        },\n        onExit: 'resetContext'\n      }\n    }\n  },\n  {\n    actions: {\n      setContext: assign((ctx, event) => ({ ...event.context })),\n      resetContext: assign(({ release, isLoaded, assets }) => ({\n        ...getInitialContext(),\n        release,\n        isLoaded,\n        assets\n      }))\n    },\n    services: {\n      fetchAssets: async context => {\n        if (context.assets === null) return Promise.resolve(true);\n\n        await delay(500);\n        return Promise.resolve(true);\n        // return Promise.reject(true)\n      }\n    }\n  }\n);\n\nexport default ReleaseMachine;\n","import React, { PureComponent } from 'react';\nimport { Keyframes, animated } from 'react-spring';\nimport { Link, NavLink } from 'react-router-dom';\nimport delay from 'delay';\nimport { withApp } from 'Hoc';\nimport { getNavImgSrc } from 'Utils';\nimport './index.scss';\n\nconst _NAV_WIDTH = 36;\nconst _NAV_LINK_HEIGHT = 10;\nconst _NAV_DRAWER_PADDING = 2;\nconst _NAV_COVER_MARGIN = 5;\nconst _NAV_COVERS_HEIGHT = (_NAV_WIDTH + _NAV_COVER_MARGIN) * 3;\nconst _NAV_CLOSE_Y = _NAV_LINK_HEIGHT + _NAV_DRAWER_PADDING;\nconst _NAV_COVERS_Y_FULL = _NAV_CLOSE_Y + _NAV_COVERS_HEIGHT;\nconst _NAV_COVERS_Y = _NAV_COVERS_HEIGHT;\n\n// nW: nav Width\n// cbT: close button translateY\n// clT: covers list translateY\n// mbO: more button opacity\n\nconst getInitialProps = () => ({\n  nW: 0,\n  cbT: _NAV_CLOSE_Y,\n  clT: _NAV_COVERS_Y_FULL,\n  mbO: 1\n});\n\nconst NavState = Keyframes.Spring({\n  unmounted: getInitialProps(),\n  mounted: async next => {\n    next({ nW: _NAV_WIDTH, from: getInitialProps() });\n    await delay(300);\n    next({ cbT: 0, clT: _NAV_COVERS_Y });\n  },\n  expend: async next => {\n    next({ mbO: 0, clT: 0 });\n  },\n  unexpend: async next => {\n    await delay(300);\n    next({ clT: _NAV_COVERS_Y });\n    await delay(200);\n    next({ mbO: 1 });\n  }\n});\n\nclass ReleasesNav extends PureComponent {\n  state = {\n    coversState: undefined\n  };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { isIdle, isLeaving } = nextProps;\n\n    if (prevState.coversState !== undefined && (isIdle || isLeaving))\n      return {\n        coversState: undefined\n      };\n\n    return null;\n  }\n\n  handleOnMouseEnter = () => {\n    if (this.props.isIdle) return;\n    if (this.state.coversState === 'expend') return;\n    this.setState({ coversState: 'expend' }, () =>\n      this.props.onSend('RELEASE.PENDING')\n    );\n  };\n\n  handleOnMouseLeave = () => {\n    // if(!this.props.isMounted && this.state.coversState !== undefined)\n    //   return this.setState({ coversState: undefined })\n\n    if (this.state.coversState === 'unexpend') return;\n\n    this.setState({ coversState: 'unexpend' });\n  };\n\n  render() {\n    const { isMounted, isIdle, isLeaving } = this.props;\n    const { coversState } = this.state;\n    const state =\n      isIdle || isLeaving\n        ? 'unmounted'\n        : coversState === undefined\n        ? 'mounted'\n        : coversState;\n    return (\n      <NavState native state={state}>\n        {({ nW, cbT, clT, mbO }) => (\n          <div\n            className={`releases__nav ${\n              isMounted ? 'releases__nav--mounted' : ''\n            }`}\n          >\n            <div className=\"releases__nav__drawer releases__nav__drawer--close\">\n              <animated.div\n                className=\"releases__nav__drawer__content\"\n                style={{\n                  transform: cbT.interpolate(p => `translateY(${p}px)`)\n                }}\n              >\n                <Link to=\"/\" className=\"releases__nav__link\">\n                  close\n                </Link>\n              </animated.div>\n            </div>\n            <animated.div\n              className=\"releases__nav__hr\"\n              style={{\n                width: nW.interpolate(p => p)\n              }}\n            />\n            <div\n              className=\"releases__nav__drawer releases__nav__drawer--covers\"\n              onMouseLeave={this.handleOnMouseLeave}\n            >\n              <animated.div\n                className=\"releases__nav__drawer__content\"\n                style={{\n                  transform: clT.interpolate(p => `translateY(-${p}px)`)\n                }}\n              >\n                <div\n                  className=\"releases__nav__covers\"\n                  onMouseEnter={this.handleOnMouseEnter}\n                >\n                  {['album', 'split', 'ep'].map(item => (\n                    <NavLink\n                      to={`/releases/${item}`}\n                      key={`releases__nav__covers__${item}`}\n                      className=\"releases__nav__covers__link\"\n                      activeClassName=\"releases__nav__covers__link--active\"\n                    >\n                      <img\n                        src={getNavImgSrc('releases', item)}\n                        className={`releases__nav__covers__img releases__nav__covers__img--${item}`}\n                        alt=\"\"\n                      />\n                    </NavLink>\n                  ))}\n                </div>\n                <animated.div\n                  className=\"releases__nav__link\"\n                  onClick={this.handleOnMouseEnter}\n                  style={{\n                    opacity: mbO.interpolate(p => p)\n                  }}\n                >\n                  more\n                </animated.div>\n              </animated.div>\n            </div>\n          </div>\n        )}\n      </NavState>\n    );\n  }\n}\n\nconst mapContextToProps = context => ({\n  isIdle: context.matches('ready.releases.idle'),\n  isMounted: context.matches('ready.releases.mounted'),\n  isLeaving: context.matches('ready.releases.leaving')\n});\n\nexport default withApp(mapContextToProps)(ReleasesNav);\n","import React, { lazy, Suspense } from 'react';\nimport classNames from 'classnames';\n\nimport { Spinner } from 'Components';\nimport { withApp } from 'Hoc';\nimport ReleasesNav from './Nav';\nimport './index.scss';\n\nconst Album = lazy(() => import('./Album'));\nconst Split = lazy(() => import('./Split'));\nconst Ep = lazy(() => import('./Ep'));\n\n// https://codepen.io/2xsamurai/pen/WwmjKQ\nexport const ReleasesScrollInvite = ({ show }) => (\n  <div\n    className={classNames('release__scroll-invite', {\n      'release__scroll-invite--show': show\n    })}\n  >\n    <div className=\"release__scroll-invite__mouse\">\n      <div className=\"release__scroll-invite__scroller\" />\n    </div>\n  </div>\n);\n\nexport const ReleasesLoading = () => (\n  <div className=\"release__loading release__loading--show\">\n    <Spinner theme=\"white\" />\n  </div>\n);\n\nconst Releases = ({\n  isActive,\n  id: { next, current, previous },\n  scrollInvite\n}) => (\n  <div\n    className={classNames('layer releases', {\n      'layer--active': isActive,\n      [`releases--previous-${previous}`]: previous,\n      [`releases--current-${current}`]: current && isActive,\n      [`releases--next-${next}`]: next && isActive\n    })}\n  >\n    <ReleasesNav />\n    <ReleasesScrollInvite show={scrollInvite} />\n    <Suspense fallback={null}>\n      <Album />\n      <Split />\n      <Ep />\n    </Suspense>\n  </div>\n);\n\nconst mapContextToProps = context => ({\n  isActive: !context.matches('ready.releases.idle'),\n  scrollInvite: context.matches('ready.releases.mounted.pending.idle'),\n  id: context.context.id\n});\n\nexport default withApp(mapContextToProps)(Releases);\n","import React, { PureComponent } from 'react';\nimport { getPhotoUrl, ImgTracker, ImgPrefetch } from 'Utils';\nimport './index.scss';\n\nexport default class Image extends PureComponent {\n  static defaultProps = {\n    extension: 'jpg',\n    className: ''\n  };\n\n  state = {\n    isLoaded: false\n  };\n\n  _imgRef = React.createRef();\n\n  //\n  // Life cycle\n  // --------------------------------------------------\n\n  componentDidMount() {\n    ImgTracker.observe(this._imgRef.current, this.handleOnVisible);\n  }\n\n  componentDidUpdate() {}\n\n  componentWillUnmount() {\n    if (this._imgRef.current && !this.state.isLoaded)\n      ImgTracker.unobserve(this._imgRef.current);\n  }\n\n  //\n  // Helpers\n  // --------------------------------------------------\n\n  _getImgPath = () => {\n    const { src, extension } = this.props;\n    const format = this.state.isLoaded ? 'md' : 'sm';\n    return getPhotoUrl(`${src}-${format}.${extension}`);\n  };\n\n  _getRest = () => {\n    const { className, extension, src, ...rest } = this.props;\n\n    return rest;\n  };\n\n  //\n  // Handlers\n  // --------------------------------------------------\n\n  handleOnVisible = () => {\n    ImgTracker.unobserve(this._imgRef.current);\n    ImgPrefetch(this._getImgPath('md'), true)\n      .then(r => this.setState({ isLoaded: true }))\n      .catch(e => console.log(e));\n  };\n\n  //\n  // Render\n  // --------------------------------------------------\n\n  render() {\n    const { className } = this.props;\n\n    return (\n      <img\n        ref={this._imgRef}\n        src={this._getImgPath()}\n        className={`figure__img figure__img--small  ${className}`}\n        alt=\"\"\n        {...this._getRest()}\n      />\n    );\n  }\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport './index.scss';\n\nconst Spinner = ({ theme, className }) => {\n  let w = 44, // width & height\n    s = 4, // stroke\n    t = 2, // translate\n    r = 20, // circle radius\n    d = 'M35.816 7.757C32.158 3.037 26.434 0 20 0 8.954 0 0 8.954 0 20',\n    o = 0.3, // back color opacity\n    f, // front color\n    b; // back color\n\n  switch (theme) {\n    case 'white':\n      f = '#fff';\n      b = '#fff';\n      break;\n    default:\n    case 'dark':\n      f = '#ececec';\n      b = '#575757';\n      o = 1;\n  }\n\n  return (\n    <svg\n      className={classNames('c-spinner', className)}\n      width={w}\n      height={w}\n      viewBox={`0 0 ${w} ${w}`}\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g\n        transform={`translate(${t} ${t})`}\n        strokeWidth={s}\n        fill=\"none\"\n        fillRule=\"evenodd\"\n      >\n        <circle stroke={f} opacity={o} cx={r} cy={r} r={r} />\n        <path d={d} stroke={b} strokeLinecap=\"round\" />\n      </g>\n    </svg>\n  );\n};\n\nSpinner.defaultProps = {\n  theme: 'dark',\n  className: ''\n};\n\nexport default Spinner;\n","export { default as Image } from \"./Image\";\nexport { default as Spinner } from \"./Spinner\";\n","module.exports = __webpack_public_path__ + \"static/media/home-bkgd.2eab98fd.jpg\";","module.exports = __webpack_public_path__ + \"static/media/img_error.18614bf6.jpg\";","//\n// Break Points\n// --------------------------------------------------\n\nexport const MEDIA_QUERIES_LIST = [\n  {\n    match: '(min-width: 1281px)',\n    device: 'desktop',\n    orientation: null\n  },\n  {\n    match: '(max-width: 1280px) and (min-width: 1025px)',\n    device: 'laptop',\n    orientation: null\n  },\n  {\n    match: '(max-width: 1024px) and (min-width: 768px)',\n    device: 'tablet',\n    orientation: 'portrait'\n  },\n  {\n    match:\n      '(max-width: 1024px) and (min-width: 768px) and (orientation: landscape)',\n    device: 'tablet',\n    orientation: 'landscape'\n  },\n  {\n    match: '(max-width: 767px) and (min-width: 481px)',\n    device: 'mobile',\n    orientation: 'landscape'\n  },\n  {\n    match: '(max-width: 480px) and (min-width: 320px)',\n    device: 'mobile',\n    orientation: 'portrait'\n  }\n];\n\nexport const MEDIA_QUERIES_BY_MATCH = MEDIA_QUERIES_LIST.reduce(\n  (prev, { match, device, orientation }) => {\n    prev[match] = { device, orientation };\n    return prev;\n  },\n  {}\n);\n\n//\n// Break Points\n// --------------------------------------------------\n\nexport const SCROLLBAR_WIDTH = (function() {\n  var outer, outerStyle, scrollbarWidth;\n  if (!document) return 0;\n  outer = document.createElement('div');\n  outerStyle = outer.style;\n  outerStyle.position = 'absolute';\n  outerStyle.width = '100px';\n  outerStyle.height = '100px';\n  outerStyle.overflow = 'scroll';\n  outerStyle.top = '-9999px';\n  if (document.body !== null) document.body.appendChild(outer);\n  scrollbarWidth = outer.offsetWidth - outer.clientWidth;\n  if (document.body !== null) document.body.removeChild(outer);\n  return scrollbarWidth;\n})();\n\n//\n// Idle\n// --------------------------------------------------\n\nexport const RELEASE_IDLE_TIMEOUT = 1000 * 3;\nexport const STORY_TRIGGER_THROTTLE = 500;\nexport const STORY_TRIGGER_EVENTS = [\n  // 'mousemove',\n  'wheel',\n  'DOMMouseScroll',\n  'mouseWheel',\n  // 'mousedown',\n  'touchstart',\n  'touchmove',\n  'MSPointerDown',\n  'MSPointerMove'\n];\n\n//\n// RELEASES\n// --------------------------------------------------\n\nexport const RELEASES = {\n  album: {\n    title: 'Album'\n  },\n  split: {\n    title: 'Split w/ the Missing 23rd'\n  },\n  ep: {\n    title: 'Debut EP'\n  }\n};\nexport const RELEASES_ID = Object.keys(RELEASES);\nexport const RELEASES_COVERS = RELEASES_ID.map(id => `covers/${id}.jpg`);\n\n//\n// VIDEOS\n// --------------------------------------------------\n\nexport const VIDEOS = {\n  nevers: {\n    videoId: 'PhDboaR01zY',\n    title: 'Live at Nevers, FR',\n    description: 'Nov. 16 2007, Le café charbon'\n  },\n  rouge: {\n    videoId: 'Fj8WOeQamvw',\n    title: 'Rouge',\n    description: 'music video'\n  }\n};\n\nexport const VIDEOS_ID = Object.keys(VIDEOS);\nexport const VIDEOS_THUMBS = VIDEOS_ID.map(id => `videos/${id}-md.jpg`);\n\n//\n// App Loading\n// --------------------------------------------------\n\nexport const APP_FONTS_LIST = [\n  { name: 'Open Sans', weight: 400 },\n  { name: 'Open Sans', weight: 700 },\n  { name: 'Open Sans', weight: 800 },\n  // { name: 'Open_Sans', weight: 900 },\n  { name: 'Rubik', weight: 500 },\n  { name: 'IM Fell English' },\n  { name: 'Zilla Slab' }\n];\nexport const APP_FONTS_TIMEOUT = 5000;\nexport const APP_IMAGES_ONLOAD = RELEASES_COVERS.concat(VIDEOS_THUMBS);\n\nexport const HOME_BKGD_VIDEOID = 'Pdni_p27l_0';\n"],"sourceRoot":""}